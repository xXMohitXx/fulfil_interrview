# Deployment Guide

## Supabase Database Setup

1. **Create Supabase Account**
   - Go to https://supabase.com
   - Sign up or log in
   - Create a new project

2. **Get Database URL**
   - In your Supabase project dashboard
   - Go to Settings → Database
   - Copy the PostgreSQL connection string
   - It should look like: `postgresql://postgres:[password]@[host]:5432/postgres`

3. **Test Connection (Optional)**
   ```bash
   python -c "from config import Config; from models import db; from app import app; app.app_context().push(); db.create_all(); print('✅ Database connection successful')"
   ```

## Render Deployment

### Method 1: GitHub Integration (Recommended)

1. **Push to GitHub** (Already done ✅)
   ```bash
   git add -A
   git commit -m "Add deployment configuration"
   git push origin main
   ```

2. **Create Render Service**
   - Go to https://render.com
   - Sign up/login and connect your GitHub account
   - Click "New" → "Web Service"
   - Connect your repository: `xXMohitXx/fulfil_interrview`

3. **Configure Service**
   - **Name**: `product-management-app`
   - **Environment**: `Python 3`
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `python app.py`

4. **Environment Variables**
   Set these in Render dashboard:
   ```
   DATABASE_URL=postgresql://postgres:[password]@[host]:5432/postgres
   SECRET_KEY=[auto-generated by Render]
   FLASK_ENV=production
   ```

5. **Deploy**
   - Click "Create Web Service"
   - Render will automatically deploy from your GitHub repo

### Method 2: Manual Deployment

1. **Install Render CLI**
   ```bash
   npm install -g @render/cli
   render auth login
   ```

2. **Deploy**
   ```bash
   render deploy
   ```

## Environment Variables Needed

| Variable | Description | Example |
|----------|-------------|---------|
| `DATABASE_URL` | Supabase PostgreSQL URL | `postgresql://postgres:pass@host:5432/postgres` |
| `SECRET_KEY` | Flask secret key | Auto-generated by Render |
| `FLASK_ENV` | Environment mode | `production` |
| `PORT` | Port number | `10000` (auto-set by Render) |

## Post-Deployment Steps

1. **Initialize Database**
   - The app will automatically create tables on first run
   - Check Render logs to verify successful startup

2. **Create Demo Webhooks (Optional)**
   - Once deployed, you can create demo webhooks via the web interface
   - Or run: `python create_demo_webhooks.py` in Render shell

3. **Test Application**
   - Your app will be available at: `https://product-management-app.onrender.com`
   - Test product creation, CSV upload, and webhooks

## Troubleshooting

### Common Issues:

1. **Database Connection Error**
   - Verify `DATABASE_URL` is correct
   - Check Supabase project is active
   - Ensure connection string includes password

2. **Build Failure**
   - Check `requirements.txt` is up to date
   - Verify Python version in `runtime.txt`

3. **App Won't Start**
   - Check Render logs for error details
   - Verify `Procfile` is correct
   - Ensure environment variables are set

### Debug Commands:

```bash
# Local database test
python reset_db.py

# Local app test
python run.py

# Check requirements
pip freeze > requirements.txt
```

## Production URLs

- **Supabase Dashboard**: https://app.supabase.com/project/[your-project-id]
- **Render Dashboard**: https://dashboard.render.com/web/[your-service-id]
- **Live Application**: https://product-management-app.onrender.com

## Monitoring

- **Render Metrics**: View in Render dashboard
- **Database Metrics**: View in Supabase dashboard
- **Application Logs**: Available in Render logs section